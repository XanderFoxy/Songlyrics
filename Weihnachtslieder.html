<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Weihnachtslieder</title>
<style>
  :root{
    --menu-w:320px;
    --thumb-size:56px;
    --cover-side:260px;
    --bg-opacity:0.08;
    --bg-blur:6px;
    --accent:#4a90e2;
    --menu-bg:#003366;
    --menu-hover:#004080;
    --text-color:#222;
  }

  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
  body{display:flex;background:#efefef;color:var(--text-color);height:100vh;overflow:hidden;}

  /* LEFT MENU */
  #menu{
    width:var(--menu-w);
    background:var(--menu-bg);
    color:#fff;
    box-sizing:border-box;
    padding:14px;
    overflow:auto;
    border-right:1px solid rgba(255,255,255,0.03);
  }
  
  #menu h1{
    margin:0 0 10px 0;font-size:18px;letter-spacing:0.3px;
    font-weight:600;color:var(--accent);
  }

  /* VERSTECKTER LINK */
  #menu h1 a { color: inherit; text-decoration: none; cursor: pointer; }
  #menu h1 a:hover, #menu h1 a:visited, #menu h1 a:active { color: inherit; text-decoration: none; }

  .song-entry{
    display:flex; gap:10px; align-items:center; padding:8px; border-radius:8px;
    margin-bottom:8px; cursor:pointer; transition:background .15s, transform .06s;
  }
  .song-entry:hover{ background:var(--menu-hover); transform:translateY(-1px); }
  .song-entry img{
    width:var(--thumb-size); height:var(--thumb-size); object-fit:cover;
    border-radius:6px; background:#666; flex:0 0 auto;
  }
  .meta{ display:flex; flex-direction:column; min-width:0; }
  
  .artist{ font-weight:700; font-size:15px; line-height:1; color:#fff; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .title{ font-style:italic; font-size:13px; color:#ddd; margin-top:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

  /* CONTENT AREA */
  #content-wrap{flex:1;position:relative;display:flex;overflow:hidden;}
  #cover-bg{
    position:absolute;inset:0;z-index:0;pointer-events:none;
    background-size:cover;background-position:center;
    opacity:var(--bg-opacity);filter:blur(var(--bg-blur));
    transition:background-image .25s ease, opacity .2s ease;
  }
  #content{
    position:relative; z-index:1; padding:28px; overflow:auto; display:flex;
    gap:22px; align-items:flex-start; box-sizing:border-box; width:100%;
  }
  .lyrics{
    flex:1 1 auto; max-width:calc(100% - var(--cover-side) - 40px);
    background:rgba(255,255,255,0.8); padding:22px; border-radius:10px;
    box-shadow:0 6px 20px rgba(0,0,0,0.08); backdrop-filter: blur(2px);
    font-family: "Cormorant Garamond", "Georgia", serif;
    font-style:italic; font-size:18px; line-height:1.6; color:var(--text-color);
  }
  .lyrics h2{
    margin:0 0 2px 0; font-style:normal; font-size:22px; color:#111;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  }
  .song-copyright {
    font-family: Inter, sans-serif; font-style: normal; font-size: 14px;
    color: #666; margin-bottom: 20px; display: block;
  }
  .lyrics pre{
    margin:0; white-space:pre-wrap; word-break:break-word; font-family:inherit;
    font-style:italic; font-size:17px; color:#222;
  }

  /* COVER & 3D FLIP */
  .cover-aside{
    width:var(--cover-side); flex:0 0 var(--cover-side); display:flex;
    flex-direction:column; gap:12px; align-items:center;
  }
  
  .flip-container {
    perspective: 1000px;
    width: 220px; height: 220px; cursor: pointer;
  }
  .flipper {
    transition: 0.6s; transform-style: preserve-3d; position: relative;
    width: 100%; height: 100%; border-radius:8px;
    box-shadow:0 8px 30px rgba(0,0,0,0.12);
  }
  .flip-container.flipped .flipper { transform: rotateY(180deg); }
  .front, .back {
    backface-visibility: hidden; position: absolute; top: 0; left: 0;
    width: 100%; height: 100%; border-radius:8px; overflow: hidden;
  }
  .front { z-index: 2; transform: rotateY(0deg); }
  .front img { width: 100%; height: 100%; object-fit: cover; background:#ddd; }
  
  /* RÜCKSEITE STYLE (PIANO MINIATUREN) */
  .back {
    transform: rotateY(180deg);
    background: #1a1a1a;
    color: #fff;
    display: flex; flex-direction: column; 
    justify-content: center; 
    align-items: center;
    padding: 10px; box-sizing: border-box; text-align: center;
  }
  
  .chord-section { 
    width: 100%; margin-bottom: 12px; 
  }
  .chord-section:last-child { margin-bottom: 0; }

  .chord-part-label {
    font-family: Inter, sans-serif; font-size: 10px; text-transform: uppercase;
    color: #666; margin: 0 0 4px 0; letter-spacing: 1px; width:100%; text-align:left; border-bottom:1px solid #333;
  }
  .chord-grid {
    display: flex; 
    flex-flow: row nowrap; 
    justify-content: center; 
    gap: 12px; 
  }
  .piano-box {
    display: flex; flex-direction: column; align-items: center;
  }
  .piano-name {
    font-family: Inter, sans-serif; font-weight: 700; font-size: 10px; 
    color: var(--accent); margin-bottom: 2px; line-height: 1;
  }
  /* SVG Styles */
  .key-white { fill: #fff; stroke: #888; stroke-width: 0.5px; } 
  .key-black { fill: #000; stroke: #000; stroke-width: 0.5px; }
  .key-active { fill: var(--accent) !important; }

  .chord-placeholder { color: #666; font-style: italic; margin-top: auto; margin-bottom: auto;}

  .meta-right{ width:100%; text-align:center; color:#333; font-family:Inter, Arial, sans-serif; }
  .meta-right .year{font-weight:600;color:#111;}
  .meta-right .artist{font-weight:700;font-size:16px;color:#111;}
  .meta-right .title{font-style:italic;color:#333;font-size:15px;margin-top:4px;}

  @media (max-width:900px){
    :root{--menu-w:240px; --cover-side:180px;}
    .lyrics{font-size:16px;}
    .flip-container{width:160px;height:160px;}
  }
  @media (max-width:700px){
    body{flex-direction:column;}
    #menu{width:100%; height:220px; border-right:none; border-bottom:1px solid rgba(0,0,0,0.06);}
    #content-wrap{height:calc(100vh - 220px);}
    .lyrics{max-width:100%;}
    .cover-aside{display:none;}
  }
  .no-img{background:linear-gradient(135deg,#ddd,#eee);display:flex;align-items:center;justify-content:center;color:#999;font-weight:600;font-size:12px;}
</style>
</head>
<body>

  <nav id="menu" aria-label="Songliste">
    <h1><a href="Songtexte.html">Songtexte</a></h1>
  </nav>

  <section id="content-wrap">
    <div id="cover-bg" aria-hidden="true"></div>

    <main id="content">
      <article class="lyrics" id="lyrics">
        <h2>Wähle einen Song</h2>
        <pre>Wähle links im Menü ein Lied aus — der Text erscheint hier, mit dem Cover leicht als Hintergrund und groß rechts daneben.</pre>
      </article>

      <aside class="cover-aside" id="cover-aside" aria-hidden="true">
        <div class="flip-container" id="cover-flip-container">
          <div class="flipper">
            <div class="front">
              <img id="cover-large" alt="Cover" class="no-img" />
            </div>
            <div class="back" id="cover-back-content">
              <span class="chord-placeholder">Akkorde nicht verfügbar</span>
            </div>
          </div>
        </div>

        <div class="meta-right">
          <div class="year" id="meta-year"></div>
          <div class="artist" id="meta-artist"></div>
          <div class="title" id="meta-title"></div>
        </div>
      </aside>
    </main>
  </section>

<script>
/* CHORD MAP (Generische Dur/Moll für die Weihnachtslieder) */
const CHORD_MAP = {
  "C":  [0, 4, 7],      // C-Dur
  "G":  [7, 11, 14],    // G-Dur
  "Am": [9, 12, 16],    // A-Moll
  "F":  [5, 9, 12],     // F-Dur
  "Dm": [2, 5, 9],      // D-Moll
  // C-moll basierte Akkorde (zur Vollständigkeit, falls benötigt)
  "Cm": [0, 3, 7],
  "Gm": [7, 10, 14],
};

/* HELPER: INTELLIGENTES PIANO SVG - BLOCK ANKER LOGIK */
function createPianoSVG(activeKeys) {
  let minKey = activeKeys.length > 0 ? Math.min(...activeKeys) : 0;
  let maxKey = activeKeys.length > 0 ? Math.max(...activeKeys) : 0;
  
  if (activeKeys.length === 0) {
      minKey = 0;
      maxKey = 11;
  }
  
  const isWhite = (k) => [0,2,4,5,7,9,11].includes((k % 12 + 12) % 12);
  
  let startKey = minKey;
  while(true) {
    let noteInOctave = (startKey % 12 + 12) % 12;
    if (noteInOctave === 0 || noteInOctave === 5) break; 
    startKey--;
  }
  
  let endKey = maxKey;
  if(maxKey >= minKey && !isWhite(endKey)) endKey++; 
  
  let whiteCount = 0;
  let k = startKey;
  let finalEndKey = endKey;

  while(true) {
    if(isWhite(k)) whiteCount++;
    if(k >= finalEndKey && whiteCount >= 7) {
      finalEndKey = k;
      break;
    }
    k++;
    if(k > startKey + 24) { finalEndKey = startKey + 11; break; } 
  }
  endKey = finalEndKey;

  let actualWhiteKeys = 0;
  for(let i = startKey; i <= endKey; i++) {
      if(isWhite(i)) actualWhiteKeys++;
  }
  
  const keyWidth = 40 / (actualWhiteKeys > 0 ? actualWhiteKeys : 7); 
  const hWhite = 24;
  const wBlack = keyWidth * 0.65;
  const hBlack = 14;
  
  let svgContent = "";
  let currentX = 0;
  let whitePositions = {}; 
  
  for(let k=startKey; k<=endKey; k++) {
    if(isWhite(k)) {
      let isActive = activeKeys.includes(k);
      let cls = isActive ? "key-white key-active" : "key-white";
      svgContent += `<rect x="${currentX}" y="0" width="${keyWidth}" height="${hWhite}" class="${cls}" />`;
      whitePositions[k] = currentX;
      currentX += keyWidth;
    }
  }
  
  for(let k=startKey; k<=endKey; k++) {
    if(!isWhite(k)) {
      let prevWhite = k - 1;
      if(whitePositions[prevWhite] !== undefined) {
        let isActive = activeKeys.includes(k);
        let cls = isActive ? "key-black key-active" : "key-black";
        let xPos = whitePositions[prevWhite] + keyWidth - (wBlack/2);
        svgContent += `<rect x="${xPos}" y="0" width="${wBlack}" height="${hBlack}" class="${cls}" />`;
      }
    }
  }

  return `<svg width="40" height="24" viewBox="0 0 40 24" xmlns="http://www.w3.org/2000/svg">${svgContent}</svg>`;
}


/* SONGDATA FÜR WEIHNACHTEN */
const songs = [
  /* 1. Als Wenn Ein Engel.. */
  {
    artist: "Sweet Velvet",
    title: "Als Wenn Ein Engel..",
    year: "2012",
    copyright: "© Xander Fox",
    image: "IMG_0107.jpeg", 
    text: `Die Zeit Ist Nah\nSo Lang Schon Hab Ich\nEs Herbei Gesehnt\n\nWie Jedes Jahr\nEin Lichterglanz Sich\nAuf Uns Niederlegt\n\nDein Zauber Fällt Herab\nIn Eine Welt Aus Sternenstaub\nIn Diese Stille Heilige Nacht\nSo Tief berührt die Liebe\nDie Mein Herz In Atem Hält\nAls Wenn Ein Engel\nÜber Mir Wacht..\n\nStarr Ruht Der See\nUnd Alles Scheint Nun\nWieder Still Zu Stehn\n\nHier Wo Ich Geh\nKlingt Leis Ein Lied\nWill Mir Von Dir Erzähln\n\nUnd Dort\nAm Waldesrand Ein Licht\nEs Scheint\nAls Ob Es Zu Mir Spricht\nKomm Laß\nDas Alte Leid Verwehn\nAuf Das\nWir Bald Uns Wieder Sehn\n\nDein Zauber Fällt Herab\nIn Eine Welt Aus Sternenstaub\nIn Diese Stille Heilige Nacht\nSo Tief berührt die Liebe\nDie Mein Herz In Atem Hält\nAls Wenn Ein Engel\nÜber Mir Wacht..\n\nDein Zauber Fällt Herab\nIn Eine Welt Aus Sternenstaub\nIn Diese Stille Heilige Nacht\nSo Tief berührt die Liebe\nDie Mein Herz In Atem Hält\nAls Wenn Ein Engel\n\nÜber Mir Wacht..`
  },
  /* 2. As Close As You Can Come */
  {
    artist: "One Day in Rome",
    title: "As Close As You Can Come",
    year: "2017",
    copyright: "© Xander Fox",
    image: "IMG_6876.jpeg",
    text: `When the Stars appear so near\nSeem to shine only for you\nThrough the Trees so silently\nGive me company\nCome on, walk with me\n\nFill My Eyes\nwith all the magic love and light\n\nGive my heart\nthe joy of Christmas for this night\n\nHold on tight\nBecause I want you to be close\n\nWithin my arms\nAs close as you can come\n\nEyes illuminate from candle shine\nShare the holy tide with me\nOn your heartbeat I can hear\ncarol melodies\nLet it talk to me\n\nFill My Eyes\nwith all the magic love and light\n\nGive my heart\nthe joy of Christmas for this night\n\nHold on tight\nBecause I want you to be close\n\nWithin my arms\nAs close as you can come`
  },
  /* 3. So schön ist die Weihnacht */
  {
    artist: "One Day in Rome",
    title: "So schön ist die Weihnacht",
    year: "2025",
    copyright: "© Xander Fox",
    image: "IMG_8762.jpeg",
    text: `Wie aus einem Bild\nNichts gleich dem Gefühl\nSo still steht die Zeit hier\nSiehst du mich nur an\nBin ich wie gebannt\nFühl dich so nah bei mir\n\nKomm, mach dich bereit\nEs ist an der Zeit\nSo schön ist die Weihnacht\nSo wie jedes Jahr\nWie es immer war\nWill ich es noch einmal\n\nWenn du mich nur hältst\nVersinkt diese Welt\nIn friedliches Schweigen\nDein Licht strahlt so hell\nKüss mich, denn es soll\nFür immer so bleiben\n\nKomm, mach dich bereit\nEs ist an der Zeit\nSo schön ist die Weihnacht\nSo wie jedes Jahr\nWie es immer war\nWill ich es noch einmal\n\nSo schön ist die Weihnacht..\nSo schön ist die Weihnacht..\nSo schön ist die Weihnacht..`
  }
];

songs.sort((a,b) => {
  const T1 = (a.title || "").toLowerCase(); const T2 = (b.title || "").toLowerCase();
  if(T1 < T2) return -1; if(T1 > T2) return 1; return 0;
});

/* APP LOGIC - REST BLEIBT GLEICH */

songs.forEach((s,i) => {
  const entry = makeEntry(s,i);
  menu.appendChild(entry);
});

if(songs.length) showSong(songs[0]);

</script>

</body>
</html>
