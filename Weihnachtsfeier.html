<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Weihnachtsfeier 12.12.2025</title>
<style>
  :root{
    --menu-w:320px;
    --thumb-size:56px;
    --cover-side:260px;
    --bg-opacity:0.08;
    --bg-blur:6px;
    --accent:#f3c64a;
    --menu-bg:#111;
    --menu-hover:#2b2b2b;
    --text-color:#222;
  }

  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
  body{display:flex;background:#efefef;color:var(--text-color);height:100vh;overflow:hidden;}

  /* LEFT MENU */
  #menu{
    width:var(--menu-w);
    background:var(--menu-bg);
    color:#fff;
    box-sizing:border-box;
    padding:14px;
    overflow:auto;
    border-right:1px solid rgba(255,255,255,0.03);
  }
  
  #menu h1{
    margin:0 0 10px 0;font-size:18px;letter-spacing:0.3px;
    font-weight:600;color:var(--accent);
  }

  #menu h1 a { color: inherit; text-decoration: none; cursor: pointer; }
  #menu h1 a:hover { color: inherit; }

  .song-entry{
    display:flex; gap:10px; align-items:center; padding:8px; border-radius:8px;
    margin-bottom:8px; cursor:pointer; transition:background .15s, transform .06s;
  }
  .song-entry:hover{ background:var(--menu-hover); transform:translateY(-1px); }
  .song-entry img{
    width:var(--thumb-size); height:var(--thumb-size); object-fit:cover;
    border-radius:6px; background:#666; flex:0 0 auto;
  }
  .meta{ display:flex; flex-direction:column; min-width:0; }
  
  .artist{ font-weight:700; font-size:15px; line-height:1; color:#fff; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .title{ font-style:italic; font-size:13px; color:#ddd; margin-top:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

  /* CONTENT AREA */
  #content-wrap{flex:1;position:relative;display:flex;overflow:hidden;}
  #cover-bg{
    position:absolute;inset:0;z-index:0;pointer-events:none;
    background-size:cover;background-position:center;
    opacity:var(--bg-opacity);filter:blur(var(--bg-blur));
    transition:background-image .25s ease, opacity .2s ease;
  }
  #content{
    position:relative; z-index:1; padding:28px; overflow:auto; display:flex;
    gap:22px; align-items:flex-start; box-sizing:border-box; width:100%;
  }
  .lyrics{
    flex:1 1 auto; max-width:calc(100% - var(--cover-side) - 40px);
    background:rgba(255,255,255,0.8); padding:22px; border-radius:10px;
    box-shadow:0 6px 20px rgba(0,0,0,0.08); backdrop-filter: blur(2px);
    font-family: "Cormorant Garamond", "Georgia", serif;
    font-style:italic; font-size:18px; line-height:1.6; color:var(--text-color);
  }
  .lyrics h2{
    margin:0 0 2px 0; font-style:normal; font-size:22px; color:#111;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  }
  .song-copyright {
    font-family: Inter, sans-serif; font-style: normal; font-size: 14px;
    color: #666; margin-bottom: 20px; display: block;
  }
  .lyrics pre{
    margin:0; white-space:pre-wrap; word-break:break-word; font-family:inherit;
    font-style:italic; font-size:17px; color:#222;
  }

  /* COVER & 3D FLIP */
  .cover-aside{
    width:var(--cover-side); flex:0 0 var(--cover-side); display:flex;
    flex-direction:column; gap:12px; align-items:center;
  }
  
  .flip-container {
    perspective: 1000px;
    width: 220px; height: 220px; cursor: pointer;
  }
  .flipper {
    transition: 0.6s; transform-style: preserve-3d; position: relative;
    width: 100%; height: 100%; border-radius:8px;
    box-shadow:0 8px 30px rgba(0,0,0,0.12);
  }
  .flip-container.flipped .flipper { transform: rotateY(180deg); }
  .front, .back {
    backface-visibility: hidden; position: absolute; top: 0; left: 0;
    width: 100%; height: 100%; border-radius:8px; overflow: hidden;
  }
  .front { z-index: 2; transform: rotateY(0deg); }
  .front img { width: 100%; height: 100%; object-fit: cover; background:#ddd; }
  
  /* RÜCKSEITE STYLE */
  .back {
    transform: rotateY(180deg);
    background: #1a1a1a;
    color: #fff;
    display: flex; flex-direction: column; 
    justify-content: center; 
    align-items: center;
    padding: 10px; 
    box-sizing: border-box; text-align: center;
    overflow-y: auto; 
  }
  
  /* SONDERREGEL (Dense Mode): Weniger Padding an den Seiten */
  .back.dense-mode {
    padding: 10px 2px; 
  }

  /* STANDARD SPACING (Luftig) */
  .chord-section { 
    width: 100%; margin-bottom: 12px; 
  }
  .chord-section:last-child { margin-bottom: 0; }

  .chord-part-label {
    font-family: Inter, sans-serif; font-size: 10px; text-transform: uppercase;
    color: #666; margin: 0 0 4px 0; 
    letter-spacing: 1px; width:100%; text-align:left; border-bottom:1px solid #333;
  }
  
  /* Label-Einrückung im Dense Mode */
  .back.dense-mode .chord-part-label {
    margin-left: 8px; margin-right: 8px; width: auto;
  }

  .chord-grid {
    display: flex; 
    flex-flow: row wrap; 
    justify-content: center; 
    gap: 12px; 
    row-gap: 12px;
  }
  .piano-box {
    display: flex; flex-direction: column; align-items: center;
    margin-bottom: 4px;
  }

  /* DYNAMISCHES SPACING (KOMPAKT) */
  .chord-section.dense {
    margin-bottom: 4px; /* Enger, damit es vertikal passt */
  }
  .chord-grid.dense {
    gap: 3px; /* Horizontal eng */
    row-gap: 2px; /* Vertikal sehr eng für 4-Zeiler */
  }
  .chord-grid.dense .piano-box {
    margin-bottom: 1px;
  }

  /* Zeilenumbruch */
  .break { flex-basis: 100%; height: 0; }

  .piano-name {
    font-family: Inter, sans-serif; font-weight: 700; font-size: 10px; 
    color: var(--accent); margin-bottom: 2px; line-height: 1;
  }
  .key-white { fill: #fff; stroke: #888; stroke-width: 0.5px; } 
  .key-black { fill: #000; stroke: #000; stroke-width: 0.5px; }
  .key-active { fill: var(--accent) !important; }

  .chord-placeholder { color: #666; font-style: italic; margin-top: auto; margin-bottom: auto;}

  .meta-right{ width:100%; text-align:center; color:#333; font-family:Inter, Arial, sans-serif; }
  .meta-right .year{font-weight:600;color:#111;}
  .meta-right .artist{font-weight:700;font-size:16px;color:#111;}
  .meta-right .title{font-style:italic;color:#333;font-size:15px;margin-top:4px;}

  @media (max-width:900px){
    :root{--menu-w:240px; --cover-side:180px;}
    .lyrics{font-size:16px;}
    .flip-container{width:160px;height:160px;}
  }
  @media (max-width:700px){
    body{flex-direction:column;}
    #menu{width:100%; height:220px; border-right:none; border-bottom:1px solid rgba(0,0,0,0.06);}
    #content-wrap{height:calc(100vh - 220px);}
    .lyrics{max-width:100%;}
    .cover-aside{display:none;}
  }
  .no-img{background:linear-gradient(135deg,#ddd,#eee);display:flex;align-items:center;justify-content:center;color:#999;font-weight:600;font-size:12px;}
</style>
</head>
<body>

  <nav id="menu" aria-label="Songliste">
    <h1><a href="Songtexte.html">Songtexte</a></h1>
  </nav>

  <section id="content-wrap">
    <div id="cover-bg" aria-hidden="true"></div>

    <main id="content">
      <article class="lyrics" id="lyrics">
        <h2>Wähle einen Song</h2>
        <pre>Wähle links im Menü ein Lied aus — der Text erscheint hier, mit dem Cover leicht als Hintergrund und groß rechts daneben.</pre>
      </article>

      <aside class="cover-aside" id="cover-aside" aria-hidden="true">
        <div class="flip-container" id="cover-flip-container">
          <div class="flipper">
            <div class="front">
              <img id="cover-large" alt="Cover" class="no-img" />
            </div>
            <div class="back" id="cover-back-content">
              <span class="chord-placeholder">Klick mich für Akkorde...</span>
            </div>
          </div>
        </div>

        <div class="meta-right">
          <div class="year" id="meta-year"></div>
          <div class="artist" id="meta-artist"></div>
          <div class="title" id="meta-title"></div>
        </div>
      </aside>
    </main>
  </section>

<script>
/* CHORD MAP */
const CHORD_MAP = {
  "C":  [0, 4, 7],      // C-Dur
  "Am": [9, 12, 16],    // A-Moll
  "F":  [5, 9, 12],     // F-Dur
  "G":  [7, 11, 14],    // G-Dur
  "Dm": [2, 5, 9],      // D-Moll
  
  // Moll-Akkorde
  "Cm": [0, 3, 7],      // C-Moll
  "Gm": [7, 10, 14],    // G-Moll
  "Ab": [8, 12, 15],    // Ab-Dur
  "Eb": [3, 7, 10],     // Es-Dur
  "Bb": [10, 14, 17],   // B-Dur

  // NEUE AKKORDE für "The Wall" Text Teil
  "Bbm": [10, 13, 17],  // Bb, Db, F
  "Gb": [6, 10, 13],    // Gb, Bb, Db
  "Fm": [5, 8, 12],     // F, Ab, C

  // Spezial-Akkorde für "The Wall" Refrain
  "Ebm/Bb": [10, 15, 18], 
  "Gb/Bb": [10, 13, 18],  
  "Db": [1, 5, 8],        
  "Ab/C": [0, 3, 8]       
};

// PLATZHALTER BILD (Data URI) - Ein einfaches graues Bild mit Text "No Cover"
const PLACEHOLDER_IMG = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300' viewBox='0 0 300 300'%3E%3Crect width='300' height='300' fill='%23e0e0e0'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='24' fill='%23999' dominant-baseline='middle' text-anchor='middle'%3ENo Cover%3C/text%3E%3C/svg%3E";

/* ---------- SONGDATA ---------- */
const songs = [
  /* 1. Bis zum Mond */
  {
    artist: "One Day in Rome", title: "Bis zum Mond", year: "2025", copyright: "© Xander Fox", image: "35BF267A-4519-4CC2-BC73-A2634A336AD1.jpeg",
    chords: {
      verse: ["F", "Am", "G", "Dm"],
      chorus: ["F", "Am", "G", "Dm"]
    },
    text: `Bis zum Morgen\nLass uns bleiben\nLass mich deine Blicke spüren\nJede Seite neu beschreiben\n\nOhne Wärme, ohne Liebe\nWürden wir nicht existieren\nIn der kalten Atmosphäre\nHoffnungslos erfrieren\n\nReiß dich los, lass uns treiben\nEinmal um die ganze Welt\nBis zum Mond und immer weiter\n\nDir allein nur will ich zeigen\nWas den höchsten Stern erhellt\nLass uns lieben, lass uns schweigen\n\nNur für eine Ewigkeit\nWill ich in deinen Armen sein\nSteh mir bei, sei mein Begleiter\nLass mich nicht allein\n\nReiß dich los, lass uns treiben\nEinmal um die ganze Welt\nBis zum Mond und immer weiter\n\nLass uns fliegen, übersteig\nWas sich in deinen Schatten stellt\nBis zum Mond und immer weiter\n\nUnd immer weiter...`
  },
  /* 2. Ein Leben Lang */
  {
    artist: "One Day in Rome", title: "Ein Leben Lang", year: "2025", copyright: "© Xander Fox", image: "IMG_0166.jpeg",
    chords: { 
      verse: ["Cm", "Gm", "Ab", "Eb"], 
      chorus: ["Cm", "Ab", "Eb", "Bb"] 
    },
    text: `So lang du denkst\nWie schön es wär\nLebst du dem Traum\nNur hinterher\n\nMit allen Wolken\nWillst du ziehen\nDeinem Gefühl\nNie mehr widerstehen\n\nUnd wenn du fällst\nNimm meine Hand\nIch will mit dir gemeinsam gehen\nEin Leben lang\nDurch diese Welt\nHab keine Angst\nHör auf dein Herz\nUnd wir verlieren den Verstand\n\nDie Sehnsucht brennt\nDer Weg ist weit\nBis in das Licht\nTrägt uns die Zeit\n\nUnd irgendwann\nWird um uns ein\nHimmel so hoch\nUnd endlos sein\n\nUnd wenn du fällst\nNimm meine Hand\nIch will mit dir gemeinsam gehen\nEin Leben lang\nDurch diese Welt\nHab keine Angst\nHör auf dein Herz\nUnd wir verlieren den Verstand`
  },
  /* 3. Eins (NEU - Mit Platzhalter Bild) */
  {
    artist: "One Day in Rome", title: "Eins", year: "2025", copyright: "© Xander Fox", image: "",
    chords: null,
    text: `Es Ist Doch Egal\nOb Du Mich Verstehst\nWas Dich Nicht Berührt\nDas Tut Auch Nicht Weh\n\nEs Gibt Keine Wahl\nKein A Oder B\nDarum Und Deshalb\nBrauchst Du Mich Auch Nicht\nMehr So Anzusehen..\n\nAls Wärst Du Bei Mir\nUnd Wir Noch Eins\nAls Würd Ich Dich Manchmal\nLeise Sagen Hören\nHalt Dich Fest Und Bleib\n\nAls Wärst Du Noch Hier\nWir Niemals Entzweit\nDoch Alles Was Bleibt Sind Meine Fragen\nDurch Die Einsamkeit\n\nNichts Ist Mehr Normal\nDas Chaos Regiert\nMein Herz Schlägt Schlaflos Einfach Leer\nVerbrennt Und Erfriert\n\nIch Weiß Nicht Einmal\nWas Mich Motiviert\nStill - Ohne Signal\nNur Im Freien Fall\nNoch Fängt Und Entführt..\n\nAls Wärst Du Bei Mir\nUnd Wir Noch Eins\nAls Würd Ich Dich Manchmal\nLeise Sagen Hören\nHalt Dich Fest Und Bleib\n\nAls Wärst Du Noch Hier\nWir Niemals Entzweit\nDoch Alles Was Bleibt Sind Meine Fragen\n\nDurch Die Einsamkeit\n\nAls Wärst Du Bei Mir\nUnd Wir Noch Eins\n\nAls Wärst Du Noch Hier\nWir Niemals Entzweit\n\nAls Wärst Du Bei Mir\nUnd Wir Noch Eins\nAls Würd Ich Dich Manchmal\nLeise Sagen Hören\nHalt Dich Fest Und Bleib\n\nAls Wärst Du Noch Hier\nWir Niemals Entzweit\nDoch Alles Was Bleibt Sind Meine Fragen\n\nDurch Die Einsamkeit`
  },
  /* 4. Everything ( I Want ) (NEU - Mit Platzhalter Bild) */
  {
    artist: "One Day in Rome", title: "Everything ( I Want )", year: "2025", copyright: "© Xander Fox", image: "",
    chords: null,
    text: `I Ignore\nLike You Would Do\nWe Rise And Fall\nBut Still Got Through\nWhenever You Rely On Me\nI‘m There For You\n\nWhen You Call My Name\nI Suddenly Can‘t Stop\nI‘m Anticipating\nNothing Less But Love\n\nWe Are Playing Hide And Seek\nWhile We‘re Waiting In The Deep\nAnd The Life We Know Has Gone\nGive Me Everything\n\nEverything I Want\n\nOut Of And Into The Blue\nWe Act Before\nWe Think It Through\nWhatever You Have Done To Me\nI Care For You\n\nI Don‘t Mind What Follows\nOnce I‘m Going Blind\nLatest By Tomorrow\nYou Will Still Be Mine\n\nWe Are Playing Hide And Seek\nWhile We‘re Waiting In The Deep\nAnd The Life We Know Has Gone\nGive Me Everything\nEverything I Want\n\nGive Me Everything\nEverything\nI Want Everything\nGive Me Love\n\nWe Are Playing Hide And Seek\nWhile We‘re Waiting In The Deep\nAnd The Life We Know Has Gone\nGive Me Everything\nEverything I Want`
  },
  /* 5. Halt mich! */
  {
    artist: "One Day in Rome", 
    title: "Halt mich!", 
    year: "2025", copyright: "© Xander Fox", image: "fQ5C8n5z.jpeg",
    chords: {
      verse: ["Cm", "Eb", "Ab", "Eb", "Gm", "Ab", "Eb", "Bb"],
      chorus: ["Ab", "Eb", "Cm", "Bb"]
    },
    text: `Sag mir nur noch einmal was es heißt, dass wir uns so tief berühren.\nDeine Nähe die mich fast zerreißt, kann ich nicht mehr ignorieren.\n\nGib mir ein Herz, in das ich mich verlieren kann\nHalt mich und sieh mich an, wie du mich siehst.\nNimm meinen Schmerz von mir, dass ich dich fühlen kann,\nWie du mit deiner Hand mich reparierst.\n\nDeine Augen reflektieren ein unbeschreiblich schönes Bild.\nLass mich wieder deine Liebe spüren alles was ich fühl.\n\nGib mir ein Herz, in das ich mich verlieren kann,\nHalt mich und sieh mich an, wie du mich siehst.\nNimm meinen Schmerz von mir, dass ich dich fühlen kann,\nWie du mit deiner Hand mich reparierst\n\nGib mir ein Herz, gib mir ein Herz,\nHalt mich und sieh mich an, wie du mich siehst.\nNimm meinen Schmerz nimm meinen Schmerz.\nWie du mit deiner Hand mich reparierst`
  },
  /* 6. Kein Mensch */
  {
    artist: "One Day in Rome", title: "Kein Mensch", year: "2025", copyright: "© Xander Fox", image: "Snapshot 11-02-2024 02:00.jpeg",
    text: `Es ist Nacht\nhier\nin deinen Armen\nNimm meine Hand\nDenn du weißt genau\ndass ich auch\nnicht mehr anders kann\nDu musst nichts verstehen\nIch bin schon lang in deinem Bann\nDarum bleib bei mir\nKomm und sieh mich\nnur noch einmal\nso an\n\nSo als würden wir\nunsere Seelen inhalieren\nIch will dich mit mir\nbis die Sterne explodieren\nSelbst wenn wir\ngemeinsam fallen\nWer kommt mich heilen?\nUnd ich weiß\nkein Mensch\nWürde\nSo wie du mit mir sein\n\nIch lieg wach\nhier\nin deinen Armen\nbin ich dir nah\nGrad hab ich noch\nvon dir geträumt\nUnd schon bist du wahr\nUnd so wunderschön\nDas ist alles\nnicht mehr normal\nHalt dich bei mir fest\nDenn wir haben\neh keine andere\nWahl\n\nSo als würden wir\nunsere Seelen inhalieren\nIch will dich mit mir\nbis die Sterne explodieren\nSelbst wenn wir\ngemeinsam fallen\nWer kommt mich heilen?\nUnd ich weiß\nkein Mensch\nWürde\nSo wie du mit mir sein`
  },
  /* 7. Let Me Know */
  {
    artist: "One Day in Rome", title: "Let Me Know", year: "2025", copyright: "© Xander Fox", image: "IMG_1393.jpeg",
    chords: {
      verse: ["Am", "G", "F", "Dm", "BREAK", "Am", "G", "F", "Am", "G"], 
      chorus: ["C", "G", "Dm", "Am"] 
    },
    text: `Since I am born, I beg and cry\nFor love I yearn each day at night\nDark, like my world inside you hide\nNo sign, no word, no wrong or right\n\nWhenever you return let me know why\nDo I have to burn while I'm alive\nIf there's a chance to get out and survive\nGive me a light to see, open up my eyes\n\nMy life, it hurts without you now\nI find no cure, can’t make it out\nIf I deserve please set me free\nAlmighty girl, let it be me\n\nWhenever you return let me know why\nDo I have to burn while I'm alive\nIf there's a chance to get out and survive\nGive me a light to see, open up my eyes`
  },
  /* 8. Meine Heiligkeit (What If..?) */
  {
    artist: "One Day in Rome", title: "Meine Heiligkeit (What If..?)", year: "2025", copyright: "© Xander Fox", image: "IMG_0174.jpeg",
    text: `Wenn mein Herz sich nach dir sehnt\nSo heiß, wie ein Feuer brennt\nTrag mich bis zu dir hinauf\nWeil ich an deine Liebe glaub\n\nMeine Heiligkeit bist du\nHörst du, wie mein Herz dich ruft?\nDu bist alles, was es sucht\nWenn ich fall, fängst du mich auf\nDu und ich, fühlst du es auch?\nJetzt wird alles wieder gut\n\nDenn ich lieb dich unentwegt\nWie ein Gefühl, das nie vergeht\nWenn mich niemand mehr versteht\nHilft deine Hand mir auf den Weg\n\nMeine Heiligkeit bist du\nHörst du, wie mein Herz dich ruft?\nDu bist alles, was es sucht\nWenn ich fall, fängst du mich auf\nDu und ich, fühlst du es auch?\nJetzt wird alles wieder gut`
  },
  /* 9. Ohne Deine Liebe */
  {
    artist: "One Day in Rome", title: "Ohne Deine Liebe", year: "2025", copyright: "© Xander Fox", image: "Facetune_29-07-2023-13-55-27.jpeg",
    chords: {
      verse: ["Ab", "Bb", "Ab", "Gm"], 
      chorus: ["Cm", "Eb", "Ab", "Gm"] 
    },
    text: `Kannst du mir erklären\nWas geschehen ist\nMusst du denn zerstören\nWas du mir noch bist\n\nWarum bin ich einsam\nDu nicht mehr bei mir\nWollten wir gemeinsam\nNicht die Welt regieren\n\nWarum bin ich hier\nWie lang muss ich bleiben\nOhne deine Liebe\nDie mich still entführt\n\nMein Herz ruft nach dir\nKann dich nicht verschweigen\nDu wirst immer bleiben\nIrgendwo in mir\n\nWarum bist du so\nFern und unerreichbar\nDa wohin du gehen willst\nKann ich dich nicht sehen\n\nWas hält uns am Leben\nWorin liegt der Sinn\nSag mir doch weswegen\nWir verloren sind\n\nWarum bin ich hier\nWie lang muss ich bleiben\nOhne deine Liebe\nDie mich still entführt\n\nMein Herz ruft nach dir\nKann dich nicht verschweigen\nDu wirst immer bleiben\nIrgendwo in mir`
  },
  /* 10. Tell Me (NEU - Mit Platzhalter Bild) */
  {
    artist: "One Day in Rome", title: "Tell Me", year: "2025", copyright: "© Xander Fox", image: "",
    chords: null,
    text: `Give It To Me Right On Time\nThere‘s Nobody\nNo One‘s Doing It Alike\nHow You Hold Me\nIn A While\nCould I Know\nWe Really Have To Say Goodbye\n\nBefore You Go\nTell Me\nThe Words I Love To Hear\nSomething To Fool My Mind\nThe Lies I Can’t Read In Your Eyes\n\nThe Lies I Can’t Read In Your Eyes\n\nTell Me Whom Am I So Near\nGive Me Something True\nBefore You Disappear\n\nAnd You Will Never Show\nNo One Ever Knows\nWho Could Hide Behind\nSomeone Elses Mind\n\nTake Me On A Ride\n\nLet Your Secrets Fly\n\nBefore You Go\nTell Me\nThe Words I Love To Hear\nSomething To Fool My Mind\nThe Lies I Can’t Read In Your Eyes\n\nThe Lies I Can’t Read In Your Eyes\n\nBefore You Go\nTell Me\nThe Words I Love To Hear\nSomething To Fool My Mind\nThe Lies I Can’t Read In Your Eyes\n\nThe Lies I Can’t Read In Your Eyes`
  },
  /* 11. The Wall */
  {
    artist: "One Day in Rome", title: "The Wall", year: "2025", copyright: "© Xander Fox", image: "nDkD8XLZ.jpeg",
    chords: {
      verse: ["Bbm", "Gb", "Ab", "Fm"], 
      chorus: ["Ebm/Bb", "Gb/Bb", "Db", "Ab/C"]
    },
    text: `Welcome to the fake\nZombies living for God's sake\nIn a world of Sheep\nEverything we do believe\n\nWe claim we know it all\nCan’t see who is behind this wall.\nDon’t wait, follow the light\nWake up, open your eyes.\n\nWhy can’t we just feel\nThere is so much more to see\nAre we hypnotised?\nWhat does it need to realise\n\nWe claim we know it all\nCan’t see who is behind this wall.\nDon’t wait, follow the light\nWake up, open your eyes.`
  },
  /* 12. Wir (DENSE MODE, ENGES SPACING) */
  {
    artist: "One Day in Rome", title: "Wir", year: "2025", copyright: "© Xander Fox", image: "IMG_0179.jpeg",
    chords: {
      // Verse: 10 Chords + Break -> Trigger Dense
      verse: ["Cm", "Ab", "Gm", "Cm", "Gm", "BREAK", "Bb", "Ab", "Gm", "Cm", "Gm"],
      // Chorus: 6 Chords + Break -> Trigger Dense
      chorus: ["Cm", "Eb", "Gm", "BREAK", "Ab", "Gm", "Bb"]
    },
    text: `Es ist gar nicht so leicht\nDieses Leben zu verstehen\nManchmal darum vielleicht\nAuch so schwer, einfach weiterzugehen\n\nWenn du denkst, durchzudrehen\nWeil du noch etwas spürst in dir\nLass uns nicht lange reden\nEs gibt viel zu viel zu verlieren\n\nWenn die Welt untergeht\nBin ich bei dir\nDu bist alles, was zählt\nWas ich fühl in mir\nDarum lass uns nicht warten\nWarum sollen wir leiden, wofür?\nDas ist unsere Wahrheit\nAlles was wir noch haben, sind wir\n\nWir sind groß\nWir sind schön, unerreicht\nSchwer zu greifen\nDenn wir schweben federleicht\n\nAuch wenn sie uns versuchen\nzu verführen\nKeine Chance\nWir sind viel zu wir dafür\n\nWenn die Welt untergeht\nBin ich bei dir\nDu bist alles, was zählt\nWas ich fühl in mir\nDarum lass uns nicht warten\nWarum sollen wir leiden, wofür?\nDas ist unsere Wahrheit\nAlles was wir noch haben, sind wir`
  },
  /* 13. Words Of Love */
  {
    artist: "One Day in Rome", title: "Words Of Love", year: "2025", copyright: "© Xander Fox", image: "IMG_0105.jpeg",
    text: `Tell Me Little Angel\nWon't You Kiss My Sensual Lips\nClose The Golden Gates Behind\nCome Move In Closer\nOn A Mystic Trip\nWe Feel So High\n\nLet's Call It Love\nLet's Fake It All\nLet It Seem\nEverything\nYou Never Dream Of\nA Little Closer\nUntil I Cut Your Wings\nNow You're Trapped In\n\nSay Do You Believe My Words Of Love\nI Am The Devil In Disguise\nNothing Here Is Real\nYou Just Forgot\nThe Shock Will Make You Feel\nAnd Let You Fall\n\nSay Do You Receive My Words Of Hope\nMelodramatic Eyes Reply\nWe Don't Really Need\nTo Talk About\nOnce You Sign And Seal It\nThere Is No Way Out\n\nTell Me Pretty Angel\nWon't You Take It By Surprise\nT-T- The Time Is Over\nBreak Up The Shell And\nMirror Me Inside\nLet All The Secrets Fly\n\nWe Call It Love\nWe Waste It All\nAnd We Want\nEverything\nWe Hate To Deal With\nYou Can't Conceal How Sweet\nThe Sirens Sing\nThe Beat Drops In....\n\nSay Do You Believe My Words Of Love\nI Am The Devil In Disguise\nNothing Here Is Real\nYou Just Forgot\nThe Shock Will Make You Feel\nAnd Let You Fall\n\nSay Do You Receive My Words Of Hope\nMelodramatic Eyes Reply\nWe Don't Really Need\nTo Talk About\nOnce You Sign And Seal It\nThere Is No Way Out`
  }
];

songs.sort((a,b) => {
  const T1 = (a.title || "").toLowerCase(); const T2 = (b.title || "").toLowerCase();
  if(T1 < T2) return -1; if(T1 > T2) return 1; return 0;
});

/* HELPER: INTELLIGENTES PIANO SVG */
function createPianoSVG(activeKeys) {
  let minKey = Math.min(...activeKeys);
  let maxKey = Math.max(...activeKeys);
  
  let startKey = minKey;
  while(true) {
    let noteInOctave = (startKey % 12 + 12) % 12;
    if (noteInOctave === 0 || noteInOctave === 5) break; 
    startKey--;
  }
  
  const isWhite = (k) => [0,2,4,5,7,9,11].includes((k % 12 + 12) % 12);
  let endKey = maxKey;
  if(!isWhite(endKey)) endKey++; 
  
  let whiteCount = 0;
  let k = startKey;
  while(true) {
    if(isWhite(k)) whiteCount++;
    if(k >= endKey && whiteCount >= 7) {
      endKey = k;
      break;
    }
    k++;
  }
  
  const keyWidth = 40 / whiteCount; 
  const hWhite = 24;
  const wBlack = keyWidth * 0.65;
  const hBlack = 14;
  
  let svgContent = "";
  let currentX = 0;
  let whitePositions = {}; 
  
  for(let k=startKey; k<=endKey; k++) {
    if(isWhite(k)) {
      let isActive = activeKeys.includes(k);
      let cls = isActive ? "key-white key-active" : "key-white";
      svgContent += `<rect x="${currentX}" y="0" width="${keyWidth}" height="${hWhite}" class="${cls}" />`;
      whitePositions[k] = currentX;
      currentX += keyWidth;
    }
  }
  
  for(let k=startKey; k<=endKey; k++) {
    if(!isWhite(k)) {
      let prevWhite = k - 1;
      if(whitePositions[prevWhite] !== undefined) {
        let isActive = activeKeys.includes(k);
        let cls = isActive ? "key-black key-active" : "key-black";
        let xPos = whitePositions[prevWhite] + keyWidth - (wBlack/2);
        svgContent += `<rect x="${xPos}" y="0" width="${wBlack}" height="${hBlack}" class="${cls}" />`;
      }
    }
  }

  return `<svg width="40" height="24" viewBox="0 0 40 24" xmlns="http://www.w3.org/2000/svg">${svgContent}</svg>`;
}

/* APP LOGIC */
const menu = document.getElementById('menu');
const content = document.getElementById('lyrics');
const coverBg = document.getElementById('cover-bg');
const coverFlipContainer = document.getElementById('cover-flip-container');
const coverLarge = document.getElementById('cover-large');
const coverBackContent = document.getElementById('cover-back-content');
const metaYear = document.getElementById('meta-year');
const metaArtist = document.getElementById('meta-artist');
const metaTitle = document.getElementById('meta-title');

coverFlipContainer.addEventListener('click', function() {
  this.classList.toggle('flipped');
});

function makeEntry(song, idx){
  const div = document.createElement('div');
  div.className = 'song-entry';
  const img = document.createElement('img');
  
  if(song.image){
    img.src = song.image;
    img.alt = `${song.artist} - ${song.title}`;
    img.onerror = () => { 
        img.src = PLACEHOLDER_IMG; 
        img.classList.remove('no-img');
    };
  } else {
    img.src = PLACEHOLDER_IMG;
    img.alt = 'kein Cover';
  }
  
  const meta = document.createElement('div');
  meta.className = 'meta';
  const mainLine = document.createElement('div');
  mainLine.className = 'artist'; 
  mainLine.textContent = song.title || '';
  const subLine = document.createElement('div');
  subLine.className = 'title';
  subLine.textContent = song.artist || '';
  meta.appendChild(mainLine);
  meta.appendChild(subLine);
  div.appendChild(img);
  div.appendChild(meta);
  div.addEventListener('click', () => showSong(song));
  return div;
}

function showSong(song){
  coverFlipContainer.classList.remove('flipped');
  if(song.image){
    coverBg.style.backgroundImage = `url("${song.image}")`;
    coverBg.style.opacity = "var(--bg-opacity)";
  } else {
    coverBg.style.backgroundImage = '';
    coverBg.style.opacity = "0";
  }
  let h = `<h2>${escapeHtml(song.title)}</h2>`;
  if(song.copyright){
    h += `<span class="song-copyright">${escapeHtml(song.copyright)}</span>`;
  }
  content.innerHTML = h + `<pre>${escapeHtml(song.text)}</pre>`;

  if(song.image){
    coverLarge.src = song.image;
    coverLarge.alt = `${song.artist} - ${song.title}`;
    coverLarge.classList.remove('no-img');
    // Error handling für Cover Large
    coverLarge.onerror = () => {
        coverLarge.src = PLACEHOLDER_IMG;
    };
  } else {
    coverLarge.src = PLACEHOLDER_IMG;
    coverLarge.classList.remove('no-img');
  }

  coverBackContent.innerHTML = "";
  coverBackContent.className = "back"; 

  if(song.chords){
    let html = "";
    
    // Check dense mode (Logic: Total chords > 14 OR explicit BREAK)
    let totalChords = 0;
    if(song.chords.verse) totalChords += song.chords.verse.filter(c => c !== "BREAK").length;
    if(song.chords.chorus) totalChords += song.chords.chorus.filter(c => c !== "BREAK").length;

    const isDense = totalChords > 14 || 
                    (song.chords.verse && song.chords.verse.includes("BREAK")) || 
                    (song.chords.chorus && song.chords.chorus.includes("BREAK"));
    
    if(isDense) {
      coverBackContent.classList.add("dense-mode");
    }

    const renderSection = (label, chordNames) => {
      const sectionDense = chordNames.length > 4 || chordNames.includes("BREAK");
      const sectionClass = sectionDense ? "chord-section dense" : "chord-section";
      const gridClass = sectionDense ? "chord-grid dense" : "chord-grid";
      const labelClass = isDense ? "chord-part-label dense-label" : "chord-part-label";

      let sectionHtml = `<div class="${sectionClass}"><div class="${labelClass}">${label}</div><div class="${gridClass}">`;
      chordNames.forEach(cName => {
        if(cName === "BREAK") {
          sectionHtml += `<div class="break"></div>`;
        } else {
          let keys = CHORD_MAP[cName] || [];
          let svg = createPianoSVG(keys);
          sectionHtml += `<div class="piano-box"><div class="piano-name">${cName}</div>${svg}</div>`;
        }
      });
      sectionHtml += `</div></div>`;
      return sectionHtml;
    };
    if(song.chords.verse) html += renderSection("Text Teil", song.chords.verse);
    if(song.chords.chorus) html += renderSection("Refrain Teil", song.chords.chorus);
    coverBackContent.innerHTML = html;
  } else {
    coverBackContent.innerHTML = '<span class="chord-placeholder">Klick mich für Akkorde...</span>';
  }

  metaYear.textContent = song.year || '';
  metaArtist.textContent = song.artist || '';
  metaTitle.textContent = song.title || '';
}

function escapeHtml(str){
  if(!str) return '';
  return str.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
}

window.onload = function() {
  const menu = document.getElementById('menu');
  songs.forEach((s,i) => {
    const entry = makeEntry(s,i);
    menu.appendChild(entry);
  });

  if(songs.length) showSong(songs[0]);
};

</script>

</body>
</html>
